---
layout:	single
title:	"2019년 9월 9일 TIL"
date:	2019-09-09
---

  1. 오늘은 다사다난했다. 격렬하게 스프린트 회고도 하고 5시간 정도 같이 모여서 배포랑 디버깅, 포스트맨의 활용을 연구하면서 쿠키공부도 하고. 이런 시간들이 그냥 코드치는것보단 재미있는것 같다.
2. 포스트맨을 연구했다. 포스트맨의 테스트모드로 들어가서 셋팅해놓은 쿠키를 사용하지 않음으로 체크해놓으면 가입부터 서비스 그리고 로그아웃까지 모든 API를 돌려보면 다 테스트를 해볼 수 있어서 참 보기도 좋다. API문서로 출력도 된다. 셋팅해놓은 쿠키를 쓰는것도 개별 기능에서 세션ID를 가정하고 테스트하기에 유용하다. 설정해놓은 리퀘스트를 공유할 수도 있으므로 필수적인것같다.
3. 쿠키흐름에 대해 공부해봤다. 서버가 판단하기에 쿠키를 내려주기에 적당하다고 생각되면 set을 키로 가지는 쿠키 객체가 내려간다. 그럼 다음 통신에서 클라는 그 쿠키를 그대로 들고간다. 물론 그 쿠키를 들고갈지는 클라이언트 단에서 결정할 수 있다. credential 옵션으로. 이런 흐름은 철저히 CORS와도 연관이 되어 있어서 언제든지 통신환경이 변할때마다 언제든지 튀어나 올 수 있다는 점이 흥미롭다. (까다롭다)
4. SQL쿼리를 짜는데 오늘 시간을 좀 썼다. MYSQL의 경우 지원해주지 않는 함수가 꽤나 되다보니 그걸 억지로 구현하면 쿼리가 금방 지저분해진다. 오늘은 3개 테이블을 풀조인해야하는 일이 생겼는데 좀 처럼 감이 오지 않았다. 나는 풀조인이 익숙하다. 풀조인은 포기하고 느낌가는 방향으로 3개를 조인해놓고 WHERE로 하나씩 소거해가면서 내가 원하는 결과값만 나오는 방식으로 만들어보는 방향으로 진행을 했다가 실패. 결국 차분하게 말로 수두코드마냥 문장으로 쓴다음 문장을 SQL로 옮겨쓰는 전략을 해봤는데 그게 통했다.
5. 사실 ORM을 쓰고 있는데 일부러 쿼리를 짜게 된건 ORM DDL이 잘 셋팅이 안되서다. 쿼리를 다 짜놓고 나니 호기심이 생겨서 다시 ORM 셋팅을 뒤집어보고 붙여보고 질문도 하고 하다가 이게 처음에 DDL을 실행할 순서가 꼬여있다는 결론에 이르렀다. exports할때 Association할 대상들이 제대로 캐쉬에 올라와있지 않아서 에러가 발생 했었던것. 더군다나 그런 문제를 회피하기 위한 모듈실행 패턴들이 있었는데 제대로 구현을 안해놔서 지금까지 그냥 놀고 먹고만 있었던 코드들을 발견했다.
6. 프로그래밍을 계속 고생하면서 감을 유지켜야하는 영역을 만나게 되는것 같다. 어설프게 여기저기서 익히고 잊고 배우고 잊고 하면 나도 괴롭고 현실도 괴롭다. 결국 어딘가 구멍을 깊게 파야할 시점이 오는것같다. 그래서 풀스택이란 말이 참 멀게 느껴진다. 나는 뭘까..?
  